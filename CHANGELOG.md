# Change Log

All notable changes to this project will be documented in this file
automatically by Versionist. DO NOT EDIT THIS FILE MANUALLY!
This project adheres to [Semantic Versioning](http://semver.org/).

## v5.0.25 - 2017-06-29

* Chore(package): Fix missing EOL in package.json [Jonas Hermsmeier]
* Fix(windows): all drives are interpreted as read-only [Juan Cruz Viotti]
* Refactor(windows): don't use WMI to list volumes [Juan Cruz Viotti]
* Fix(windows): detect read-only flag on SD Cards without a filesystem (#183) [Juan Cruz Viotti]
* Refactor(windows): Use an IOCTL to determine the partition type (#181) [Juan Cruz Viotti]

## v5.0.24 - 2017-06-27

* Refactor(windows): implement volume::GetType() [Juan Cruz Viotti]

## v5.0.23 - 2017-06-15

* Upgrade(package): Bump dependencies [Jonas Hermsmeier]
* Doc(README): Add npm monthly download count [Jonas Hermsmeier]
* Adapt changelog for versionbot [Kostas Lekkas]
* Doc(README): Fix Travis link, use Etcher chat [Jonas Hermsmeier]

## v5.0.22

- Fix perl taking all the CPU in macOS in some cases

## v5.0.21

- Join volume and device names as descriptions if they both exists on macOS

## v5.0.20

- Inline platform scripts as a JSON file.

## v5.0.19

- Correctly deal with unicode characters coming from drive descriptions
- Correctly deal with invalid escape sequences coming from drive descriptions

## v5.0.18

- Fix mountpoints getting cut if they contain a `#` in GNU/Linux and macOS

## v5.0.17

- Fix literal `\040` on mountpoints that contain spaces in GNU/Linux

## v5.0.16

- Fix awk expression that replaces periods with underscores before evaluating
  `udevadm` output in GNU/Linux.

## v5.0.15

- Increase debug logging in the case of script errors
- Prevent errors when unplugging drives while the scripts are running

## v5.0.14

- Catch the exit code of the wrapped VBScript on Windows.

## v5.0.13

**Important:** v5.0.11 and v5.0.12 were both published to NPM from a Windows
machine. This messed up the execution permissions of the drive detection
scripts, causing `EACCES` errors.

This version is equal to v5.0.12, but was released from a UNIX based system.

## v5.0.12 [BROKEN]

- Ensure the Windows script has execution permissions.

## v5.0.11 [BROKEN]

- Omit empty SD Card readers on Windows.

## v5.0.10

- Don't include drive letters assigned to no file system in Windows mount points.

## v5.0.9

- Print platform scripts `stderr` output to a debug channel instead of throwing if the script exitted with code zero.
- Fix bug where only the first mount point is reported on GNU/Linux.
- Ensure every potentially problematic value is double quoted in the GNU/Linux and macOS scripts.

## v5.0.8

- Fix "is not recognised as an internal or external command" errors on Windows.

## v5.0.7

- Interpret "Fixed" drives as system drives in macOS.

## v5.0.6

- Fix uncaught error caused by a weird Windows configuration edge where multiple partitions were reported to have the same drive letter.

## v5.0.5

- Fix system drives being detected as removable drives on Mac Mini.

## v5.0.4

- Replace periods with underscores before evaluating `udevadm` output in GNU/Linux.

## v5.0.3

- Fix `drivelist` not detecting mountpoints in Windows due to a space/tab YAML parsing issue.

## v5.0.2

- Don't require .NET VBScript classes in Windows platform script.

## v5.0.1

- Fix `YAMLException: bad indentation of a sequence entry` Windows error.

## v5.0.0

- Transform `mountpoint` into an array of objects called `mountpoints`.
- Improve GNU/Linux detection performance.
- Correctly get SD Card readers descriptions in GNU/Linux.

## v4.0.0

- Ignore invalid YAML output from platform scripts.
- Group mount points of drives with multiple partitions in Windows.
- Switch project to JavaScript.
- Switch license to Apache 2.0.

## v3.3.4

- Ensure `%SYSTEMROOT%\System32` is in the `%PATH%` before calling `cscript.exe` on Windows.

## v3.3.3

- Default device name to device id if drive doesn't have an assigned letter in Windows.

## v3.3.2

- List all partition's mountpoints in OS X.

## v3.3.1

- Fix `blkid: command not found` in GNU/Linux.

## v3.3.0

- Fix `null` device when unplugging a device while detecting drives.
- Expose a "raw" property in all devices.
- Attempt to display the volume name as description in OS X.

## v3.2.6

- Fix internal removable drives being considered "system" in macOS Sierra.

## v3.2.5

- Fix YAML error when a description contains question marks in GNU/Linux.

## v3.2.4

- Fix missing sizes in macOS Sierra.

## v3.2.3

- Handle mountpoints with spaces in GNU/Linux.

## v3.2.2

- Check if drive is removable when the drive has no file system in Windows.

## v3.2.1

- Make use of `df` to determine mountpoints in GNU/Linux.

## v3.2.0

- Add a property called `protected`.

## v3.1.2

- Prevent certain system drives to be detected as removable in GNU/Linux.

## v3.1.1

- Fix issue that caused some hard drives to be listed as removable drives.

## v3.1.0

- Show non-mountable disk drives in Windows.

## v3.0.0

- Parse size as a number representing bytes.

## v2.0.14

- Detect mount points of drives mounted by UUID on GNU/Linux.

## v2.0.13

- Keep once decimal in Windows drive sizes.

## v2.0.12

- Make sure MacBook's internal SDCard readers are marked as removable.

## v2.0.11

- Escape double quotes in description to prevent YAML errors.

## v2.0.10

- Improve the way we detect system drives in Windows.

## v2.0.9

- Use `udev` to determine if a drive is removable on GNU/Linux.
- Mark internal and non-removable drives as system drives in OS X.
- Omit loop devices in GNU/Linux.
- Omit CD/DVD drives in GNU/Linux.

## v2.0.8

- Omit mounted DMG images in OS X.

## v2.0.7

- Add a display name property called `name`.

## v2.0.6

- Fix boolean values being surrounded by quotes.

## v2.0.5

- Trim trailing commas on GNU/Linux mountpoints.

## v2.0.4

- Support running inside Electron.

## v2.0.3

- Treat multiple mountpoint as a comma separated list of paths in GNU/Linux.

## v2.0.2

- Escape paths including spaces in unix based operating systems.

## v2.0.1

- Escape backslashes in Windows devices to avoid weird characters.

## v2.0.0

- Add example file for easy testing.
- Redesign Windows script to match the new output scheme.
- Refer to `osx` as Darwin everywhere.
- Implement GNU/Linux scanning bash script.
- Unify parsing between all supported operating systems.
- Add `system` property to returned drives.
- Remove `drivelist.isSystem()` predicate.
- Fix issue that caused some OS X drives to not be detected.

## v1.3.2

- Handle edge case where OS X drives contain a description within parenthesis in `diskutil list`.

## v1.3.1

- Surround Windows script path in double quotes to avoid issues with paths incuding white space.

## v1.3.0

- Add `mountpoint` attribute to drives.

## v1.2.2

- Fix issue where a removable drive was detected as a system drive in Linux.

## v1.2.1

- Fix win32 issue where DeviceID gets part of the device description.

## v1.2.0

- Implement isSystem predicate.

## v1.1.2

- Prevent empty lsblk model crash the module. Return `undefined` description instead.

## v1.1.1

- Prevent empty wmic size crash the module. Return `undefined` size instead.

## v1.1.0

- Return non supported OS error to the callback instead of just throwing it.
